# 🔌 نظام الإضافات (Plugins System)

## نظرة عامة

نظام الإضافات يوفر تحكم كامل في البوت من خلال أوامر WhatsApp، مع نظام صلاحيات متقدم.

---

## 🔐 نظام النخبة (Elite Users)

فقط المستخدمون المسجلون في قائمة النخبة يمكنهم استخدام الأوامر للتحكم في البوت.

### إضافة أول مستخدم نخبة

قم بتعديل ملف `config.json` يدوياً وأضف رقمك:

```json
{
  "eliteUsers": ["201234567890"],
  ...
}
```

**ملاحظة:** استخدم رقم الهاتف بدون علامات (+) أو مسافات.

---

## 📋 دليل الأوامر

جميع الأوامر تبدأ بنقطة `.`

### 🔧 أوامر إدارة البوت

#### `.تست` أو `.test`
اختبار البوت والتأكد من أنه يعمل بشكل صحيح

**مثال:**
```
.تست
```

**النتيجة:**
```
✅ البوت يعمل بشكل صحيح!

📊 الإحصائيات:
• الحالة: 🟢 نشط
• عدد الجسور: 2
• عدد النخبة: 3
• الوقت: 12/01/2024, 10:30:45 ص
```

---

#### `.ايقاف` أو `.stop`
إيقاف البوت مؤقتاً عن نقل الرسائل

**مثال:**
```
.ايقاف
```

**النتيجة:**
```
🛑 تم إيقاف البوت مؤقتاً
لن يتم نقل أي رسائل حتى إعادة التشغيل
```

---

#### `.تشغيل` أو `.start`
إعادة تشغيل البوت

**مثال:**
```
.تشغيل
```

**النتيجة:**
```
✅ تم تشغيل البوت
سيتم نقل الرسائل بشكل طبيعي
```

---

#### `.الحالة` أو `.status`
عرض حالة البوت التفصيلية

**مثال:**
```
.الحالة
```

**النتيجة:**
```
📊 حالة البوت:

• الحالة العامة: 🟢 نشط
• عدد الجسور: 3
• الجسور النشطة: 2
• الجروبات المتوقفة: 1
• مستخدمي النخبة: 5
• الفلاتر: 🟢 مفعلة
```

---

#### `.ايقاف_مؤقت` أو `.pause`
إيقاف الجروب الحالي مؤقتاً

**مثال:**
```
.ايقاف_مؤقت
```

**النتيجة:**
```
⏸️ تم إيقاف هذا الجروب مؤقتاً
لن يتم نقل رسائله حتى الاستئناف
```

---

#### `.استئناف` أو `.resume`
استئناف نقل رسائل الجروب الحالي

**مثال:**
```
.استئناف
```

**النتيجة:**
```
▶️ تم استئناف نقل رسائل هذا الجروب
```

---

### 📢 أوامر إدارة القنوات (الجسور المتعددة)

#### `.اضافة_قناة` أو `.add_channel`
إضافة جسر جديد بين جروب WhatsApp وقناة Telegram

**الصيغة:**
```
.اضافة_قناة <JID_الجروب> <معرف_القناة>
```

**مثال:**
```
.اضافة_قناة 120363123456789012@g.us @mychannel
```

**النتيجة:**
```
✅ تم إضافة الجسر بنجاح!

📱 WhatsApp: 120363123456789012@g.us
📢 Telegram: @mychannel

سيتم نقل رسائل هذا الجروب إلى القناة المحددة
```

**للحصول على JID الجروب:**
استخدم `.الحالة` أو انظر في لوج البوت عند بدء التشغيل

---

#### `.حذف_قناة` أو `.remove_channel`
حذف جسر موجود

**الصيغة:**
```
.حذف_قناة <JID_الجروب>
```

**مثال:**
```
.حذف_قناة 120363123456789012@g.us
```

**النتيجة:**
```
✅ تم حذف الجسر بنجاح!

📱 WhatsApp: 120363123456789012@g.us
```

---

#### `.القنوات` أو `.channels`
عرض جميع الجسور المفعلة

**مثال:**
```
.القنوات
```

**النتيجة:**
```
📋 الجسور المفعلة:

1. 🟢
   📱 WhatsApp: 120363123456789012@g.us
   📢 Telegram: @channel1

2. 🟢
   📱 WhatsApp: 120363987654321098@g.us
   📢 Telegram: @channel2
```

---

### 👥 أوامر إدارة النخبة

#### `.اضافة_نخبة` أو `.add_elite`
إضافة مستخدم جديد للنخبة

**الصيغة:**
```
.اضافة_نخبة <رقم_الهاتف>
```

**مثال:**
```
.اضافة_نخبة 201234567890
```

**النتيجة:**
```
✅ تم إضافة المستخدم للنخبة بنجاح!

📱 الرقم: 201234567890
```

---

#### `.حذف_نخبة` أو `.remove_elite`
حذف مستخدم من النخبة

**الصيغة:**
```
.حذف_نخبة <رقم_الهاتف>
```

**مثال:**
```
.حذف_نخبة 201234567890
```

**النتيجة:**
```
✅ تم حذف المستخدم من النخبة بنجاح!

📱 الرقم: 201234567890
```

---

#### `.النخبة` أو `.elites`
عرض قائمة مستخدمي النخبة

**مثال:**
```
.النخبة
```

**النتيجة:**
```
📋 مستخدمو النخبة:

1. 📱 201234567890
2. 📱 201098765432
3. 📱 201555666777
```

---

### 🔍 أوامر الفلترة

#### `.حظر` أو `.block`
حظر مستخدم من نقل رسائله

**الصيغة:**
```
.حظر <رقم_الهاتف>
```

**مثال:**
```
.حظر 201234567890
```

**النتيجة:**
```
🚫 تم حظر المستخدم بنجاح!

لن يتم نقل رسائله
📱 الرقم: 201234567890
```

---

#### `.الغاء_حظر` أو `.unblock`
إلغاء حظر مستخدم

**الصيغة:**
```
.الغاء_حظر <رقم_الهاتف>
```

**مثال:**
```
.الغاء_حظر 201234567890
```

**النتيجة:**
```
✅ تم إلغاء حظر المستخدم بنجاح!

📱 الرقم: 201234567890
```

---

#### `.تفعيل_فلتر` أو `.enable_filter`
تفعيل نظام الفلاتر

**مثال:**
```
.تفعيل_فلتر
```

**النتيجة:**
```
✅ تم تفعيل نظام الفلاتر

سيتم تطبيق القوائم السوداء والفلاتر المحددة
```

---

#### `.تعطيل_فلتر` أو `.disable_filter`
تعطيل نظام الفلاتر

**مثال:**
```
.تعطيل_فلتر
```

**النتيجة:**
```
🔓 تم تعطيل نظام الفلاتر

سيتم نقل جميع الرسائل بدون فلترة
```

---

### ❓ أمر المساعدة

#### `.المساعدة` أو `.help`
عرض جميع الأوامر المتاحة

**مثال:**
```
.المساعدة
```

---

## 📁 هيكل الملفات

```
what-sapp_bot/
├── plugins/
│   └── commands.js          # معالج الأوامر
├── utils/
│   ├── config.js            # إدارة ملف الإعدادات
│   └── media.js             # معالجة الوسائط
├── config.json              # ملف الإعدادات الرئيسي
└── index.js                 # الملف الرئيسي
```

---

## ⚙️ ملف config.json

### البنية الأساسية

```json
{
  "bridges": [
    {
      "whatsapp": "120363123456789012@g.us",
      "telegram": "@channel1",
      "enabled": true
    },
    {
      "whatsapp": "120363987654321098@g.us",
      "telegram": "-1001234567890",
      "enabled": true
    }
  ],
  "eliteUsers": [
    "201234567890",
    "201098765432"
  ],
  "filters": {
    "enabled": false,
    "blacklist": [
      "201555666777"
    ],
    "whitelist": [],
    "keywords": [
      "spam",
      "اعلان"
    ],
    "allowedTypes": []
  },
  "botStatus": {
    "active": true,
    "pausedGroups": [
      "120363400500074331@g.us"
    ]
  }
}
```

### شرح الحقول

#### bridges
قائمة الجسور بين WhatsApp و Telegram
- `whatsapp`: JID الجروب في واتساب
- `telegram`: معرف القناة في تيليجرام (@channel أو -1001234567890)
- `enabled`: تفعيل/تعطيل الجسر

#### eliteUsers
قائمة أرقام الهواتف المسموح لها باستخدام الأوامر

#### filters
إعدادات الفلترة:
- `enabled`: تفعيل/تعطيل النظام
- `blacklist`: قائمة الأرقام المحظورة
- `whitelist`: قائمة الأرقام المسموح لها فقط
- `keywords`: كلمات مفتاحية لفلترة الرسائل
- `allowedTypes`: أنواع الرسائل المسموح بها فقط

#### botStatus
حالة البوت:
- `active`: البوت نشط/متوقف
- `pausedGroups`: قائمة الجروبات المتوقفة مؤقتاً

---

## 🎯 سيناريوهات الاستخدام

### السيناريو 1: إعداد جسور متعددة

```
1. .اضافة_قناة 120363123@g.us @family_channel
2. .اضافة_قناة 120363456@g.us @work_channel
3. .القنوات  // للتحقق من الإضافة
```

### السيناريو 2: إدارة فريق من المشرفين

```
1. .اضافة_نخبة 201234567890  // المشرف الأول
2. .اضافة_نخبة 201098765432  // المشرف الثاني
3. .النخبة  // عرض القائمة
```

### السيناريو 3: حظر مستخدم مزعج

```
1. .حظر 201555666777
2. .تفعيل_فلتر
3. .الحالة  // التحقق من تفعيل الفلاتر
```

### السيناريو 4: إيقاف مؤقت للصيانة

```
1. .ايقاف  // إيقاف كامل
   // القيام بالصيانة
2. .تشغيل  // إعادة التشغيل
3. .تست  // التحقق من العمل
```

---

## ⚠️ ملاحظات مهمة

1. **الأوامر حساسة للمسافات**: تأكد من وجود مسافة واحدة بين الأمر والمعاملات

2. **الأرقام بدون رموز**: استخدم الأرقام بدون + أو مسافات (مثال: 201234567890)

3. **JID الجروب**: يمكن الحصول عليه من لوج البوت عند بدء التشغيل

4. **حفظ تلقائي**: جميع التغييرات تُحفظ تلقائياً في config.json

5. **أمان النخبة**: فقط مستخدمو النخبة يمكنهم تنفيذ الأوامر

---

## 🔧 استكشاف الأخطاء

### الأمر لا يعمل
- تأكد من أنك في قائمة النخبة
- تأكد من كتابة الأمر بشكل صحيح
- تحقق من وجود النقطة في البداية

### لا يتم نقل الرسائل
- استخدم `.الحالة` للتحقق من حالة البوت
- تأكد من عدم إيقاف الجروب بـ `.ايقاف_مؤقت`
- تحقق من أن البوت نشط بـ `.تست`

### الجسر لا يعمل
- تأكد من صحة JID الجروب
- تأكد من صحة معرف القناة
- تحقق من أن البوت admin في القناة

---

## 📞 الدعم

للمساعدة أو الإبلاغ عن مشاكل، افتح Issue على GitHub.

---

**صنع بكل ❤️ للمجتمع العربي**
